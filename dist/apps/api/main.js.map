{"version":3,"file":"main.js","mappings":"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","sources":["webpack://cc/./apps/api/src/app/app.controller.ts","webpack://cc/./apps/api/src/app/app.module.ts","webpack://cc/./apps/api/src/app/app.service.ts","webpack://cc/./apps/api/src/app/common/convert-img/app-convert-img.module.ts","webpack://cc/./apps/api/src/app/common/convert-img/app-convert-img.service.ts","webpack://cc/./apps/api/src/app/common/convert-img/data/app-resize-img-options.ts","webpack://cc/./apps/api/src/app/common/file/app-file-util.module.ts","webpack://cc/./apps/api/src/app/common/file/app-file-util.service.ts","webpack://cc/./apps/api/src/app/common/unpack/app-unpack.module.ts","webpack://cc/./apps/api/src/app/common/unpack/app-unpack.service.ts","webpack://cc/./apps/api/src/app/common/unpack/data/app-unpack-options.ts","webpack://cc/./apps/api/src/app/config/app-config.controller.ts","webpack://cc/./apps/api/src/app/config/app-config.module.ts","webpack://cc/./apps/api/src/app/config/app-config.service.ts","webpack://cc/./apps/api/src/app/files/app-content-type.service.ts","webpack://cc/./apps/api/src/app/files/app-file-controller.ts","webpack://cc/./apps/api/src/app/files/app-file.module.ts","webpack://cc/./apps/api/src/app/thumbs/app-thumbs.controller.ts","webpack://cc/./apps/api/src/app/thumbs/app-thumbs.module.ts","webpack://cc/./apps/api/src/app/thumbs/app-thumbs.service.ts","webpack://cc/./apps/api/src/app/thumbs/index-and-name.ts","webpack://cc/./apps/api/src/app/viewer/app-viewer-controller.ts","webpack://cc/./apps/api/src/app/viewer/app-viewer.module.ts","webpack://cc/./apps/api/src/config/configuration.ts","webpack://cc/./libs/config/src/index.ts","webpack://cc/./libs/config/src/lib/data/category.if.ts","webpack://cc/./libs/config/src/lib/data/category.ts","webpack://cc/./libs/config/src/lib/data/config.if.ts","webpack://cc/./libs/config/src/lib/data/config.ts","webpack://cc/./libs/config/src/lib/data/thumbs-dim.if.ts","webpack://cc/./libs/config/src/lib/data/thumbs-dim.ts","webpack://cc/./libs/config/src/lib/data/view-body.data.ts","webpack://cc/external commonjs \"@nestjs/common\"","webpack://cc/external commonjs \"@nestjs/config\"","webpack://cc/external commonjs \"@nestjs/core\"","webpack://cc/external commonjs \"@nestjs/serve-static\"","webpack://cc/external commonjs \"fs-extra\"","webpack://cc/external commonjs \"tslib\"","webpack://cc/external node-commonjs \"child_process\"","webpack://cc/external node-commonjs \"crypto\"","webpack://cc/external node-commonjs \"fs\"","webpack://cc/external node-commonjs \"os\"","webpack://cc/external node-commonjs \"path\"","webpack://cc/webpack/bootstrap","webpack://cc/./apps/api/src/main.ts"],"sourcesContent":["import {Controller, Get, Logger} from \"@nestjs/common\";\n\nimport {AppService} from \"./app.service\";\nimport {AppConfigService} from \"./config/app-config.service\";\n\n@Controller()\nexport class AppController {\n\n  constructor(\n    private readonly appService: AppService,\n    private readonly appConfigService: AppConfigService\n  ) {\n    const config = this.appConfigService.getConfig();\n  }\n\n  @Get(\"/\")\n  getApiInfos(): string[] {\n    return AppService.availableRoutes;\n  }\n\n\n}\n","import {CacheModule, Module} from \"@nestjs/common\";\n\nimport {AppController} from \"./app.controller\";\nimport {AppService} from \"./app.service\";\nimport {ConfigService} from \"@nestjs/config\";\n\nimport {AppConfigModule} from \"./config/app-config.module\";\nimport {AppFileModule} from \"./files/app-file.module\";\nimport {join} from \"path\";\nimport {ServeStaticModule} from \"@nestjs/serve-static\";\nimport {AppThumbsModule} from \"./thumbs/app-thumbs.module\";\nimport {AppViewerModule} from \"./viewer/app-viewer.module\";\n\n@Module({\n  imports: [\n    AppConfigModule,\n    AppFileModule,\n    AppThumbsModule,\n    AppViewerModule,\n    ServeStaticModule.forRoot({\n      exclude: ['/api/*'],\n      rootPath: join(__dirname, \"./assets\")\n    }),\n    CacheModule.register({\n      ttl: 60, // seconds\n      max: 10, // maximum number of items in cache\n      isGlobal: true,\n    })\n  ],\n  controllers: [\n    AppController\n  ],\n  providers: [\n    AppService,\n    ConfigService,\n    // {\n    //   provide: APP_INTERCEPTOR,\n    //   useClass: ErrorInterceptor\n    // }\n  ]\n})\nexport class AppModule {\n}\n","import {Injectable} from \"@nestjs/common\";\n\n@Injectable()\nexport class AppService {\n\n  static availableRoutes: string[];\n\n\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../../config/configuration\";\nimport {AppFileUtilModule} from \"../file/app-file-util.module\";\nimport {AppConvertImgService} from \"./app-convert-img.service\";\nimport {AppConfigModule} from \"../../config/app-config.module\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    }),\n    AppConfigModule,\n    AppFileUtilModule\n  ],\n  providers: [\n    AppConvertImgService\n  ],\n  exports: [\n    AppConvertImgService\n  ]\n})\nexport class AppConvertImgModule {\n}\n","import {Injectable, Logger} from \"@nestjs/common\";\nimport * as child_process from \"child_process\";\nimport {ExecException} from \"child_process\";\nimport {ResizeImgOptionsIf} from \"./data/app-resize-img-options.if\";\nimport {ResizeImgCallback} from \"./data/app-resize-img-callback.type\";\nimport {ResizeImgOptions} from \"./data/app-resize-img-options\";\n\nconst exec = child_process.exec;\n\n@Injectable()\nexport class AppConvertImgService {\n\n\n  async resizeImgSync(\n    imgSource: string,\n    imgTarget: string = imgSource,\n    options: Partial<ResizeImgOptionsIf> = new ResizeImgOptions()\n  ) {\n    return await new Promise<string>((resolve, reject) => {\n      this.resizeImg(\n        imgSource,\n        imgTarget,\n        options,\n        (err: ExecException, result: string) => {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(result);\n          }\n        });\n    });\n  }\n\n\n  resizeImg(\n    imgSource: string,\n    imgTarget: string = imgSource,\n    options: Partial<ResizeImgOptionsIf> = new ResizeImgOptions(),\n    callback: ResizeImgCallback\n  ) {\n    // imgSource must be copied already  from tmp directory to target folder!\n\n    const gmExecutable = options.gmExecutable ?? \"gm\";\n    const width = options.width ?? \"200\";\n    const height = options.height ?? \"300\";\n    const buf = [];\n    buf.push(\"\\\"\");\n    buf.push(gmExecutable);\n    buf.push(\"\\\" \");\n    buf.push(\" convert \\\"\");\n    buf.push(imgSource);\n    buf.push(\"\\\" -resize \");\n    buf.push(width);\n    buf.push(\"x\");\n    buf.push(height);\n    buf.push(\" \\\"\");\n    buf.push(imgTarget);\n    buf.push(\"\\\"\");\n\n    const command = buf.join(\"\");\n    exec(command, (err, stdout, stderr) => {\n      if (err) {\n        Logger.error(\"Error:\", err);\n      } else {\n        Logger.log(\"File saved.\", imgTarget);\n      }\n      callback(err, imgTarget);\n    });\n  }\n\n}\n","import {ResizeImgOptionsIf} from \"./app-resize-img-options.if\";\n\nexport class ResizeImgOptions implements ResizeImgOptionsIf {\n  constructor(\n    public gmExecutable: string = \"gm\",\n    public width = 200,\n    public height = 300\n  ) {\n  }\n\n\n}\n","import {Module} from \"@nestjs/common\";\nimport {AppFileUtilService} from \"./app-file-util.service\";\n\n@Module({\n  providers: [\n    AppFileUtilService\n  ],\n  exports: [\n    AppFileUtilService\n  ]\n})\nexport class AppFileUtilModule {\n}\n","import {Injectable} from \"@nestjs/common\";\nimport * as path from \"path\";\nimport * as fs from \"fs-extra\";\n\n@Injectable()\nexport class AppFileUtilService {\n\n\n  readDirs(dir: string, fileSuffixes: string[]): string[] {\n    // if (!fs.existsSync(dir)) {\n    //   return [];\n    // }\n    const dirs: string[] = [dir];\n    const allItems: string[] = [];\n\n    while (dirs.length) {\n      const dir = dirs.pop();\n      const ffs = fs.readdirSync(dir);\n      ffs.forEach(f => {\n        const f2 = path.join(dir, f);\n        const stats2 = fs.statSync(f2);\n        if (stats2.isDirectory()) {\n          dirs.push(f2);\n        } else {\n          const dir = path.dirname(f2);\n          const base = path.basename(f2);\n          const ext = path.extname(f2);\n          if (fileSuffixes.includes(ext)) {\n            allItems.push(path.join(dir, base));\n          }\n        }\n      });\n    }\n\n    const ret = allItems\n      .map(f => f.replace(/[\\\\]+/g, \"/\")) // c:\\\\user\\abc -> c:/user/abs\n      .map(f => f.replace(dir, \"\")) // we will cut off the (base) dir\n      .sort();\n    return ret;\n  }\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../../config/configuration\";\nimport {AppFileUtilModule} from \"../file/app-file-util.module\";\nimport {AppUnpackService} from \"./app-unpack.service\";\nimport {AppConfigModule} from \"../../config/app-config.module\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    }),\n    AppConfigModule,\n    AppFileUtilModule\n  ],\n  providers: [\n    AppUnpackService\n  ],\n  exports: [\n    AppUnpackService\n  ]\n})\nexport class AppUnpackModule {\n}\n","import {Injectable, Logger} from \"@nestjs/common\";\nimport * as child_process from \"child_process\";\nimport * as path from \"path\";\nimport * as os from \"os\";\nimport {UnpackOptionsIf} from \"./data/app-unpack-options.if\";\nimport {UnpackListOptionsIf} from \"./data/app-unpack-list-option.if\";\nimport {UnpackCallbackType} from \"./data/app-unpack-callback.type\";\nimport {UnpackOptions} from \"./data/app-unpack-options\";\n\nconst exec = child_process.exec;\n\n// TODO https://github.com/krocon/node-unpack-all/blob/master/postinstall.mjs\n\n@Injectable()\nexport class AppUnpackService {\n\n  static readonly archiveTypePattern = /: [A-Z,7]*$/g;\n  readonly exec = child_process.exec;\n\n  async listSync(\n    archiveFile: string,\n    options?: Partial<UnpackOptionsIf>) {\n    return await new Promise<string[]>((resolve, reject) => {\n      this.list(archiveFile, options, (err: string | undefined, files: string[] | null, _: string) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(files);\n        }\n      });\n    });\n  }\n\n  async unpackSync(\n    archiveFile: string,\n    options?: Partial<UnpackOptionsIf>) {\n    return await new Promise<string[]>((resolve, reject) => {\n      this.unpack(archiveFile, options, (err, files, _) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(files);\n        }\n      });\n    });\n  }\n\n  unpack(\n    archiveFile: string | undefined,\n    options?: Partial<UnpackOptionsIf>,\n    callback?: UnpackCallbackType) {\n\n    if (!archiveFile) {\n      throw new Error(\"Error: archiveFile is missing.\");\n    }\n    if (!callback) {\n      callback = this.defaultListCallback;\n    }\n    options = {...new UnpackOptions(), ...(options ?? {})};\n\n    // Unar command:\n    const unar = options.unar ?? \"unar\";\n    const ar = [unar];\n\n    // Archive file (source):\n    ar.push(\"SOURCEFILE\");\n\n    // -output-directory (-o) <string>: The directory to write the contents of the archive to. Defaults to the current directory.\n    ar.push(\"-o\");\n    let targetDir = options.targetDir ?? path.join(os.tmpdir(), \"tmp\");\n\n    if (options.randomTargetSubDir) {\n      targetDir = targetDir + \"/t\" + Date.now();\n    }\n\n    ar.push(targetDir);\n\n    // -force-overwrite (-f): Always overwrite files when a file to be unpacked already exists on disk. By default, the program asks the user if possible, otherwise skips the file.\n    if (options.forceOverwrite) {\n      ar.push(\"-f\");\n    }\n\n    // -force-rename (-r): Always rename files when a file to be unpacked already exists on disk.\n    if (options.forceRename) {\n      ar.push(\"-r\");\n    }\n\n    // -force-skip (-s): Always skip files when a file to be unpacked already exists on disk.\n    if (options.forceSkip) {\n      ar.push(\"-s\");\n    }\n\n    // -force-directory (-d): Always create a containing directory for the contents of the unpacked archive. By default, a directory is created if there is more than one top-level file or folder.\n    if (options.forceDirectory) {\n      ar.push(\"-d\");\n    }\n\n    // -no-directory (-D): Never create a containing directory for the contents of the unpacked archive.\n    if (options.noDirectory) {\n      ar.push(\"-D\");\n    }\n\n    // -no-recursion (-nr): Do not attempt to extract archives contained in other archives. For instance, when unpacking a .tar.gz file, only unpack the .gz file and not its contents.\n    if (options.noRecursion) {\n      ar.push(\"-nr\");\n    }\n\n    // -copy-time (-t): Copy the file modification time from the archive file to the containing directory, if one is created.\n    if (options.copyTime) {\n      ar.push(\"-t\");\n    }\n\n    // -quiet (-q): Run in quiet mode.\n    if (options.quiet) {\n      ar.push(\"-q\");\n    }\n\n    // -password (-p) <string>: The password to use for decrypting protected archives.\n    if (options.password) {\n      ar.push(\"-p\");\n      ar.push(options.password);\n    }\n    // -password-encoding (-E) <name>: The encoding to use for the password for the archive, when it is not known. If not specified, then either the encoding given by the -encoding option or the auto-detected encoding is used.\n    if (options.passwordEncoding) {\n      ar.push(\"-E\");\n      ar.push(options.passwordEncoding);\n    }\n\n    // -encoding (-e) <encoding name>: The encoding to use for filenames in the archive, when it is not known. If not specified, the program attempts to auto-detect the encoding used. Use \"help\" or \"list\" as the argument to give\n    if (options.encoding) {\n      ar.push(\"-e\");\n      ar.push(options.encoding);\n    }\n\n    if (options.indexes?.length) {\n      // -indexes (-i): Instead of specifying the files to unpack as filenames or wildcard patterns, specify them as indexes, as output by lsar.\n      options.indexes.forEach(idx => {\n        ar.push(\"-i\");\n        ar.push(\"\" + idx); // string!\n      });\n\n    } else if (options.files?.length) {\n      options.files.forEach(s => {\n        ar.push(s);\n      });\n    }\n\n    if (!options.quiet) Logger.log(\"command\", this.quote(ar));\n\n    const cmd = this.quote(ar).replace(\"SOURCEFILE\", this.escapeFileName(archiveFile));\n    if (!options.quiet) Logger.log(\"cmd\", cmd);\n\n    exec(cmd, (err, stdout, stderr) => {\n      if (err) {\n        return callback(err.name, null, \"\");\n      }\n      if (stderr && stderr.length > 0) {\n        return callback(\"Error: \" + stderr, null, \"\");\n      }\n      if (stdout && stdout.length > 0) {\n        if (stdout.indexOf(\"No files extracted\") > -1) {\n          return callback(\"Error: No files extracted\", null, \"\");\n        }\n      }\n      if (targetDir) {\n        callback(null, [targetDir], stdout);\n      }\n    });\n  }\n\n\n  list(\n    archiveFile: string | undefined,\n    options?: Partial<UnpackListOptionsIf>,\n    callback?: UnpackCallbackType) {\n\n    if (!archiveFile) {\n      throw new Error(\"Error: archiveFile is missing.\");\n    }\n    if (!callback) {\n      callback = this.defaultListCallback;\n    }\n\n    options = {...new UnpackOptions(), ...(options ?? {})};\n\n    // Unar command:\n    const lsar = options.lsar ?? \"lsar\";\n    const ar = [lsar];\n\n    // Archive file (source):\n    ar.push(\"SOURCEFILE\");\n\n    // -no-recursion (-nr): Do not attempt to extract archives contained in other archives. For instance, when unpacking a .tar.gz file, only unpack the .gz file and not its contents.\n    if (options.noRecursion) {\n      ar.push(\"-nr\");\n    }\n\n    // -password (-p) <string>: The password to use for decrypting protected archives.\n    if (options.password) {\n      ar.push(\"-p\");\n      ar.push(options.password);\n    }\n    // -password-encoding (-E) <name>: The encoding to use for the password for the archive, when it is not known. If not specified, then either the encoding given by the -encoding option or the auto-detected encoding is used.\n    if (options.passwordEncoding) {\n      ar.push(\"-E\");\n      ar.push(options.passwordEncoding);\n    }\n\n    // -encoding (-e) <encoding name>: The encoding to use for filenames in the archive, when it is not known. If not specified, the program attempts to auto-detect the encoding used. Use \"help\" or \"list\" as the argument to give\n    if (options.encoding) {\n      ar.push(\"-e\");\n      ar.push(options.encoding);\n    }\n\n    // -print-encoding (-pe): Print the auto-detected encoding and the confidence factor after the file list\n    if (options.printEncoding) {\n      ar.push(\"-pe\");\n      ar.push(options.printEncoding);\n    }\n\n    // -json (-j): Print the listing in JSON format.\n    if (options.json) {\n      ar.push(\"-j\");\n    }\n\n    // -json-ascii (-ja): Print the listing in JSON format, encoded as pure ASCII text.\n    if (options.jsonAscii) {\n      ar.push(\"-ja\");\n    }\n\n    const cmd = this.quote(ar).replace(\"SOURCEFILE\", this.escapeFileName(archiveFile));\n    if (!options.quiet) {\n      Logger.log(\"cmd\", cmd);\n    }\n\n    exec(cmd, (err, stdout, stderr) => {\n      if (err) {\n        return callback(err.name, null, \"\");\n      }\n      if (stderr && stderr.length > 0) {\n        return callback(\"Error: \" + stderr, null, \"\");\n      }\n\n      const lines = stdout.split(/(\\r?\\n)/g);\n      if (lines.length > 0) {\n        const files = lines.filter(this.defaultListFilter.bind(this));\n        return callback(null, files, \"\");\n\n      } else {\n        return callback(\"Error: no files found in archive. \" + stderr, null, \"\");\n      }\n    });\n  }\n\n\n  private escapeFileName(s: string): string {\n    return \"\\\"\" + s + \"\\\"\";\n  }\n\n  private defaultListCallback(err: string | null, _files: string[] | null, _text: string) {\n    if (err) {\n      return Logger.error(err);\n    }\n  }\n\n  private isInt(x: any) {\n    return !isNaN(x) && eval(x).toString().length === parseInt(eval(x)).toString().length;\n  }\n\n  private defaultListFilter(s: string): boolean {\n    return !!(s && s !== \"\"\n      && s.indexOf(\"\\r\") === -1\n      && s.indexOf(\"\\n\") === -1\n      && !s.includes(': ')\n      && !s.match(AppUnpackService.archiveTypePattern));\n  }\n\n  private quote(xs: any[]) {\n    return xs.map(s => {\n      if (s && typeof s === \"object\") {\n        return s.op.replace(/(.)/g, \"\\\\$1\");\n      }\n      if (/[\"\\s]/.test(s) && !/'/.test(s)) {\n        return \"'\" + s.replace(/(['\\\\])/g, \"\\\\$1\") + \"'\";\n      }\n      if (/[\"'\\s]/.test(s)) {\n        return \"\\\"\" + s.replace(/([\"\\\\$`!])/g, \"\\\\$1\") + \"\\\"\";\n      }\n      return String(s).replace(/([A-Za-z]:)?([#!\"$&'()*,:;<=>?@\\[\\\\\\]^`{|}])/g, \"$1\\\\$2\");\n\n    }).join(\" \");\n  }\n\n}\n","import {UnpackOptionsIf} from \"./app-unpack-options.if\";\nimport {UnpackCallbackType} from \"./app-unpack-callback.type\";\n\nexport class UnpackOptions implements UnpackOptionsIf {\n  constructor(\n    public callback: UnpackCallbackType | undefined = undefined,\n    public targetDir: string = \"\",\n    public unar: string = \"unar\",\n    public randomTargetSubDir: string = \"\",\n    public forceOverwrite: boolean = true,\n    public forceRename: boolean = true,\n    public forceSkip: boolean = true,\n    public forceDirectory: boolean = true,\n    public noDirectory: boolean = true,\n    public noRecursion: boolean = true,\n    public copyTime: boolean = true,\n    public quiet: boolean = true,\n    public password: string = \"\",\n    public passwordEncoding: string = \"\",\n    public encoding: string = \"\",\n    public indexes: number[] = [],\n    public files: string[] = []\n  ) {\n  }\n\n\n}\n","import {CacheInterceptor, CacheKey, CacheTTL, Controller, Get, UseInterceptors} from \"@nestjs/common\";\nimport {AppConfigService} from \"./app-config.service\";\nimport {ConfigIf} from \"@cc/config\";\n\n\n@Controller()\nexport class AppConfigController {\n\n  constructor(\n    private readonly appConfigService: AppConfigService\n  ) {\n  }\n\n  @UseInterceptors(CacheInterceptor)\n  @CacheKey('config')\n  @CacheTTL(120)\n  @Get(\"config\")\n  getConfig(): ConfigIf {\n    return this.appConfigService.getConfig();\n  }\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../config/configuration\";\nimport {AppConfigController} from \"./app-config.controller\";\nimport {AppConfigService} from \"./app-config.service\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    })\n  ],\n  controllers: [\n    AppConfigController\n  ],\n  providers: [\n    AppConfigService\n  ],\n  exports: [\n    AppConfigService\n  ]\n})\nexport class AppConfigModule {\n}\n","import {Injectable} from \"@nestjs/common\";\nimport {ConfigIf} from \"@cc/config\";\nimport {ConfigService} from \"@nestjs/config\";\nimport * as fs from \"fs\";\n\n@Injectable()\nexport class AppConfigService {\n\n\n  constructor(\n    private readonly configService: ConfigService\n  ) {\n  }\n\n\n  getConfig(): ConfigIf {\n    const configUrl = this.configService.get(\"configUrl\");\n    const rawdata = fs.readFileSync(configUrl, \"utf8\");\n    return JSON.parse(rawdata.toString());\n  }\n}\n","import {Injectable} from \"@nestjs/common\";\nimport * as path from \"path\";\n\n@Injectable()\nexport class AppContentTypeService {\n\n\n  private fileSuffixMimeTypeMap: Map<string, string> = new Map<string, string>([\n    [\"323\", \"text/h323\"],\n    [\"acx\", \"application/internet-property-stream\"],\n    [\"ai\", \"application/postscript\"],\n    [\"aif\", \"audio/x-aiff\"],\n    [\"aifc\", \"audio/x-aiff\"],\n    [\"aiff\", \"audio/x-aiff\"],\n    [\"asf\", \"video/x-ms-asf\"],\n    [\"asr\", \"video/x-ms-asf\"],\n    [\"asx\", \"video/x-ms-asf\"],\n    [\"au\", \"audio/basic\"],\n    [\"avi\", \"video/x-msvideo\"],\n    [\"axs\", \"application/olescript\"],\n    [\"bas\", \"text/plain\"],\n    [\"bcpio\", \"application/x-bcpio\"],\n    [\"bin\", \"application/octet-stream\"],\n    [\"bmp\", \"image/bmp\"],\n    [\"c\", \"text/plain\"],\n    [\"cat\", \"application/vnd.ms-pkiseccat\"],\n    [\"cdf\", \"application/x-cdf\"],\n    [\"cer\", \"application/x-x509-ca-cert\"],\n    [\"class\", \"application/octet-stream\"],\n    [\"clp\", \"application/x-msclip\"],\n    [\"cmx\", \"image/x-cmx\"],\n    [\"cod\", \"image/cis-cod\"],\n    [\"cpio\", \"application/x-cpio\"],\n    [\"crd\", \"application/x-mscardfile\"],\n    [\"crl\", \"application/pkix-crl\"],\n    [\"crt\", \"application/x-x509-ca-cert\"],\n    [\"csh\", \"application/x-csh\"],\n    [\"css\", \"text/css\"],\n    [\"dcr\", \"application/x-director\"],\n    [\"der\", \"application/x-x509-ca-cert\"],\n    [\"dir\", \"application/x-director\"],\n    [\"dll\", \"application/x-msdownload\"],\n    [\"dms\", \"application/octet-stream\"],\n    [\"doc\", \"application/msword\"],\n    [\"dot\", \"application/msword\"],\n    [\"dvi\", \"application/x-dvi\"],\n    [\"dxr\", \"application/x-director\"],\n    [\"eps\", \"application/postscript\"],\n    [\"etx\", \"text/x-setext\"],\n    [\"evy\", \"application/envoy\"],\n    [\"exe\", \"application/octet-stream\"],\n    [\"fif\", \"application/fractals\"],\n    [\"flr\", \"x-world/x-vrml\"],\n    [\"gif\", \"image/gif\"],\n    [\"gtar\", \"application/x-gtar\"],\n    [\"gz\", \"application/x-gzip\"],\n    [\"h\", \"text/plain\"],\n    [\"hdf\", \"application/x-hdf\"],\n    [\"hlp\", \"application/winhlp\"],\n    [\"hqx\", \"application/mac-binhex40\"],\n    [\"hta\", \"application/hta\"],\n    [\"htc\", \"text/x-component\"],\n    [\"htm\", \"text/html\"],\n    [\"html\", \"text/html\"],\n    [\"htt\", \"text/webviewhtml\"],\n    [\"ico\", \"image/x-icon\"],\n    [\"ief\", \"image/ief\"],\n    [\"iii\", \"application/x-iphone\"],\n    [\"ins\", \"application/x-internet-signup\"],\n    [\"isp\", \"application/x-internet-signup\"],\n    [\"jfif\", \"image/pipeg\"],\n    [\"jpe\", \"image/jpeg\"],\n    [\"jpeg\", \"image/jpeg\"],\n    [\"jpg\", \"image/jpeg\"],\n    [\"js\", \"application/x-javascript\"],\n    [\"latex\", \"application/x-latex\"],\n    [\"lha\", \"application/octet-stream\"],\n    [\"lsf\", \"video/x-la-asf\"],\n    [\"lsx\", \"video/x-la-asf\"],\n    [\"lzh\", \"application/octet-stream\"],\n    [\"m13\", \"application/x-msmediaview\"],\n    [\"m14\", \"application/x-msmediaview\"],\n    [\"m3u\", \"audio/x-mpegurl\"],\n    [\"man\", \"application/x-troff-man\"],\n    [\"mdb\", \"application/x-msaccess\"],\n    [\"me\", \"application/x-troff-me\"],\n    [\"mht\", \"message/rfc822\"],\n    [\"mhtml\", \"message/rfc822\"],\n    [\"mid\", \"audio/mid\"],\n    [\"mny\", \"application/x-msmoney\"],\n    [\"mov\", \"video/quicktime\"],\n    [\"movie\", \"video/x-sgi-movie\"],\n    [\"mp2\", \"video/mpeg\"],\n    [\"mp3\", \"audio/mpeg\"],\n    [\"mpa\", \"video/mpeg\"],\n    [\"mpe\", \"video/mpeg\"],\n    [\"mpeg\", \"video/mpeg\"],\n    [\"mpg\", \"video/mpeg\"],\n    [\"mpp\", \"application/vnd.ms-project\"],\n    [\"mpv2\", \"video/mpeg\"],\n    [\"ms\", \"application/x-troff-ms\"],\n    [\"mvb\", \"application/x-msmediaview\"],\n    [\"nws\", \"message/rfc822\"],\n    [\"oda\", \"application/oda\"],\n    [\"p10\", \"application/pkcs10\"],\n    [\"p12\", \"application/x-pkcs12\"],\n    [\"p7b\", \"application/x-pkcs7-certificates\"],\n    [\"p7c\", \"application/x-pkcs7-mime\"],\n    [\"p7m\", \"application/x-pkcs7-mime\"],\n    [\"p7r\", \"application/x-pkcs7-certreqresp\"],\n    [\"p7s\", \"application/x-pkcs7-signature\"],\n    [\"pbm\", \"image/x-portable-bitmap\"],\n    [\"pdf\", \"application/pdf\"],\n    [\"pfx\", \"application/x-pkcs12\"],\n    [\"pgm\", \"image/x-portable-graymap\"],\n    [\"pko\", \"application/ynd.ms-pkipko\"],\n    [\"pma\", \"application/x-perfmon\"],\n    [\"pmc\", \"application/x-perfmon\"],\n    [\"pml\", \"application/x-perfmon\"],\n    [\"pmr\", \"application/x-perfmon\"],\n    [\"pmw\", \"application/x-perfmon\"],\n    [\"pnm\", \"image/x-portable-anymap\"],\n    [\"pot,\", \"application/vnd.ms-powerpoint\"],\n    [\"ppm\", \"image/x-portable-pixmap\"],\n    [\"pps\", \"application/vnd.ms-powerpoint\"],\n    [\"ppt\", \"application/vnd.ms-powerpoint\"],\n    [\"prf\", \"application/pics-rules\"],\n    [\"ps\", \"application/postscript\"],\n    [\"pub\", \"application/x-mspublisher\"],\n    [\"qt\", \"video/quicktime\"],\n    [\"ra\", \"audio/x-pn-realaudio\"],\n    [\"ram\", \"audio/x-pn-realaudio\"],\n    [\"ras\", \"image/x-cmu-raster\"],\n    [\"rgb\", \"image/x-rgb\"],\n    [\"rmi\", \"audio/mid\"],\n    [\"roff\", \"application/x-troff\"],\n    [\"rtf\", \"application/rtf\"],\n    [\"rtx\", \"text/richtext\"],\n    [\"scd\", \"application/x-msschedule\"],\n    [\"sct\", \"text/scriptlet\"],\n    [\"setpay\", \"application/set-payment-initiation\"],\n    [\"setreg\", \"application/set-registration-initiation\"],\n    [\"sh\", \"application/x-sh\"],\n    [\"shar\", \"application/x-shar\"],\n    [\"sit\", \"application/x-stuffit\"],\n    [\"snd\", \"audio/basic\"],\n    [\"spc\", \"application/x-pkcs7-certificates\"],\n    [\"spl\", \"application/futuresplash\"],\n    [\"src\", \"application/x-wais-source\"],\n    [\"sst\", \"application/vnd.ms-pkicertstore\"],\n    [\"stl\", \"application/vnd.ms-pkistl\"],\n    [\"stm\", \"text/html\"],\n    [\"svg\", \"image/svg+xml\"],\n    [\"sv4cpio\", \"application/x-sv4cpio\"],\n    [\"sv4crc\", \"application/x-sv4crc\"],\n    [\"swf\", \"application/x-shockwave-flash\"],\n    [\"t\", \"application/x-troff\"],\n    [\"tar\", \"application/x-tar\"],\n    [\"tcl\", \"application/x-tcl\"],\n    [\"tex\", \"application/x-tex\"],\n    [\"texi\", \"application/x-texinfo\"],\n    [\"texinfo\", \"application/x-texinfo\"],\n    [\"tgz\", \"application/x-compressed\"],\n    [\"tif\", \"image/tiff\"],\n    [\"tiff\", \"image/tiff\"],\n    [\"tr\", \"application/x-troff\"],\n    [\"trm\", \"application/x-msterminal\"],\n    [\"tsv\", \"text/tab-separated-values\"],\n    [\"txt\", \"text/plain\"],\n    [\"uls\", \"text/iuls\"],\n    [\"ustar\", \"application/x-ustar\"],\n    [\"vcf\", \"text/x-vcard\"],\n    [\"vrml\", \"x-world/x-vrml\"],\n    [\"wav\", \"audio/x-wav\"],\n    [\"wcm\", \"application/vnd.ms-works\"],\n    [\"wdb\", \"application/vnd.ms-works\"],\n    [\"wks\", \"application/vnd.ms-works\"],\n    [\"wmf\", \"application/x-msmetafile\"],\n    [\"wps\", \"application/vnd.ms-works\"],\n    [\"wri\", \"application/x-mswrite\"],\n    [\"wrl\", \"x-world/x-vrml\"],\n    [\"wrz\", \"x-world/x-vrml\"],\n    [\"xaf\", \"x-world/x-vrml\"],\n    [\"xbm\", \"image/x-xbitmap\"],\n    [\"xla\", \"application/vnd.ms-excel\"],\n    [\"xlc\", \"application/vnd.ms-excel\"],\n    [\"xlm\", \"application/vnd.ms-excel\"],\n    [\"xls\", \"application/vnd.ms-excel\"],\n    [\"xlt\", \"application/vnd.ms-excel\"],\n    [\"xlw\", \"application/vnd.ms-excel\"],\n    [\"xof\", \"x-world/x-vrml\"],\n    [\"xpm\", \"image/x-xpixmap\"],\n    [\"xwd\", \"image/x-xwindowdump\"],\n    [\"z\", \"application/x-compress\"],\n    [\"zip\", \"application/zip\"]\n  ]);\n\n  getMimeTypeByFilename(file: string): string {\n    const ext = path.extname(file).replace(/\\./g, \"\");\n    const ct = this.fileSuffixMimeTypeMap.get(ext);\n    if (ct) {\n      return ct;\n    }\n    return \"application/octet-stream\";\n  }\n\n\n}\n","import {Controller, Get, Param} from \"@nestjs/common\";\nimport {ConfigIf} from \"@cc/config\";\nimport {AppConfigService} from \"../config/app-config.service\";\n// import { AppContentTypeService } from \"./app-content-type.service\";\nimport {AppFileUtilService} from \"../common/file/app-file-util.service\";\n\n\n@Controller(\"files\")\nexport class AppFileController {\n\n  private config: ConfigIf;\n\n  constructor(\n    private readonly appFileUtilService: AppFileUtilService,\n    private readonly appConfigService: AppConfigService\n    // private readonly appContentTypeService: AppContentTypeService\n  ) {\n    this.config = appConfigService.getConfig();\n  }\n\n  @Get(\":catIndex\")\n  getFiles(@Param(\"catIndex\") catIndex: number): string[] {\n    const category = this.config.categories[catIndex];\n    return this.appFileUtilService.readDirs(category.baseDir, category.bookExtensions);\n  }\n\n\n  // not necessary any more, see main.ts / bootstrapStaticAssets().\n  // // demo: http://localhost:3333/api/files?name=/Users/marckronberg/Comics.nosync/a/albert-enzian/Albert Enzian 08.cbr\n  // @Get()\n  // getFile(\n  //   @Query() query,\n  //   @Res({ passthrough: true }) res\n  // ): StreamableFile {\n  //   const filename = query.name;\n  //\n  //   if (fs.existsSync(filename)) {\n  //     const mimeType = this.appContentTypeService.getMimeTypeByFilename(filename);\n  //     const basename = path.basename(filename);\n  //     res.set({\n  //       \"Content-Type\": mimeType,\n  //       \"Content-Disposition\": \"attachment; filename=\\\"\" + basename + \"\\\"\"\n  //     });\n  //     const file = createReadStream(filename);\n  //     return new StreamableFile(file);\n  //   }\n  //\n  //   // The file does not exist -> we return a transparent gif:\n  //   const buf = Buffer.alloc(43);\n  //   buf.write(\"R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\", \"base64\");\n  //   const s = new Readable();\n  //   s.push(buf);\n  //   s.push(null);\n  //   return new StreamableFile(s);\n  // }\n\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../config/configuration\";\nimport {AppFileController} from \"./app-file-controller\";\nimport {AppConfigModule} from \"../config/app-config.module\";\nimport {AppContentTypeService} from \"./app-content-type.service\";\nimport {AppFileUtilModule} from \"../common/file/app-file-util.module\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    }),\n    AppConfigModule,\n    AppFileUtilModule\n  ],\n  controllers: [\n    AppFileController\n  ],\n  providers: [\n    AppContentTypeService\n  ],\n  exports: []\n})\nexport class AppFileModule {\n}\n","import {Controller, Get, Logger, Param} from \"@nestjs/common\";\nimport {ConfigIf} from \"@cc/config\";\nimport {AppConfigService} from \"../config/app-config.service\";\nimport {AppThumbsService} from \"./app-thumbs.service\";\n\n\n@Controller(\"thumbs\")\nexport class AppThumbsController {\n\n  private config: ConfigIf;\n\n  constructor(\n    private readonly appConfigService: AppConfigService,\n    private readonly appThumbsService: AppThumbsService,\n  ) {\n    this.config = appConfigService.getConfig();\n  }\n\n  @Get(\"generate/missing/:catIndex\")\n  generateMissingThumbs(@Param(\"catIndex\") catIndex: number): Promise<string[]> {\n    const category = this.config.categories[catIndex];\n    try {\n      return this.appThumbsService.generateMissingThumbs(category);\n    } catch (e) {\n      Logger.error(e);\n    }\n  }\n\n\n  // not necessary anymore, see main.ts / bootstrapStaticAssets().\n  // // demo: http://localhost:3333/api/files?name=/Users/marckronberg/Comics.nosync/a/albert-enzian/Albert Enzian 08.cbr\n  // @Get()\n  // getFile(\n  //   @Query() query,\n  //   @Res({ passthrough: true }) res\n  // ): StreamableFile {\n  //   const filename = query.name;\n  //\n  //   if (fs.existsSync(filename)) {\n  //     const mimeType = this.appContentTypeService.getMimeTypeByFilename(filename);\n  //     const basename = path.basename(filename);\n  //     res.set({\n  //       \"Content-Type\": mimeType,\n  //       \"Content-Disposition\": \"attachment; filename=\\\"\" + basename + \"\\\"\"\n  //     });\n  //     const file = createReadStream(filename);\n  //     return new StreamableFile(file);\n  //   }\n  //\n  //   // The file does not exist -> we return a transparent gif:\n  //   const buf = Buffer.alloc(43);\n  //   buf.write(\"R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\", \"base64\");\n  //   const s = new Readable();\n  //   s.push(buf);\n  //   s.push(null);\n  //   return new StreamableFile(s);\n  // }\n\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../config/configuration\";\nimport {AppThumbsController} from \"./app-thumbs.controller\";\nimport {AppThumbsService} from \"./app-thumbs.service\";\nimport {AppConfigModule} from \"../config/app-config.module\";\nimport {AppFileUtilModule} from \"../common/file/app-file-util.module\";\nimport {AppUnpackModule} from \"../common/unpack/app-unpack.module\";\nimport {AppConvertImgModule} from \"../common/convert-img/app-convert-img.module\";\n\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    }),\n    AppConfigModule,\n    AppFileUtilModule,\n    AppUnpackModule,\n    AppConvertImgModule\n  ],\n  controllers: [\n    AppThumbsController\n  ],\n  providers: [\n    AppThumbsService\n  ],\n  exports: [\n    AppThumbsService\n  ]\n})\nexport class AppThumbsModule {\n}\n","import {Injectable, Logger} from \"@nestjs/common\";\nimport {CategoryIf} from \"@cc/config\";\nimport {AppFileUtilService} from \"../common/file/app-file-util.service\";\nimport {AppUnpackService} from \"../common/unpack/app-unpack.service\";\nimport * as path from \"path\";\nimport * as fs from \"fs-extra\";\nimport {AppConvertImgService} from \"../common/convert-img/app-convert-img.service\";\nimport {IndexAndName} from \"./index-and-name\";\n\n@Injectable()\nexport class AppThumbsService {\n\n  private readonly thumbSuffix = \".jpg\";\n\n  constructor(\n    private readonly appFileUtilService: AppFileUtilService,\n    private readonly appUnpackService: AppUnpackService,\n    private readonly appConvertImgService: AppConvertImgService,\n  ) {\n  }\n\n\n  async generateMissingThumbs(category: CategoryIf): Promise<string[]> {\n    const missingThumbs = this.findMissingThumbs(category);\n    Logger.log(`${missingThumbs.length} missing thumbs`);\n    const thumbs: string[] = [];\n    for (const f of missingThumbs) {\n      const th = await this.generateMissingThumb(path.join(category.baseDir, f));\n      thumbs.push(th);\n    }\n    return thumbs;\n  }\n\n\n  async generateMissingThumb(file: string): Promise<string> {\n    Logger.log('generateMissingThumb()  file:' + file);\n    // const innerCoverUrl = await this.findCoverImage(file);\n    const innerCoverIndexAndName = await this.findCoverIndexAndName(file);\n    Logger.log('generateMissingThumb()  innerCoverUrl:' + innerCoverIndexAndName);\n    const coverTarget = await this.extractCover(file, innerCoverIndexAndName);\n    Logger.log('generateMissingThumb()  coverTarget:' + coverTarget);\n    return this.resizeExtractedCover(coverTarget);\n  }\n\n\n  async findCoverIndexAndName(file: string): Promise<IndexAndName> {\n    const contentFiles = await this.appUnpackService.listSync(file);\n    const idx = this.getCoverIndex(contentFiles);\n    if (idx < 0) {\n      return new IndexAndName(-1, '');\n    }\n    return new IndexAndName(idx, contentFiles[idx]);\n  }\n\n  async extractCover(file: string, indexAndName: IndexAndName): Promise<string> {\n    const targetDir = path.dirname(file);\n    const basename = path.basename(file);\n    const extname = path.extname(file);\n    const name = basename.replace(extname, '');\n    const unpackOptions = {targetDir, indexes: [indexAndName.index]};\n    await this.appUnpackService.unpackSync(file, unpackOptions);\n\n    const innerCoverExtname = path.extname(indexAndName.name);\n    const tempImg = path.join(targetDir, indexAndName.name);\n    const targetImg = path.join(targetDir, name + innerCoverExtname.replace('jpeg', 'jpg'));\n\n    if (fs.existsSync(targetImg)) {\n      await fs.removeSync(targetImg);\n    }\n    await fs.moveSync(tempImg, targetImg);\n    this.deleteTempDirectory(tempImg, targetDir);\n\n    return targetImg;\n  }\n\n  async resizeExtractedCover(coverTarget: string): Promise<string> {\n    return this.appConvertImgService.resizeImgSync(coverTarget);\n  }\n\n  private deleteTempDirectory(tempImg: string, targetDir: string) {\n    const tempImgDir = path.dirname(tempImg);\n    const addedTempPath = tempImgDir.replace(targetDir, '');\n    const firstAddedTempDir = addedTempPath.split('/')[1];\n    if (firstAddedTempDir) {\n      const dirForDeletion = path.join(targetDir, firstAddedTempDir);\n      const stats2 = fs.statSync(dirForDeletion);\n      if (stats2.isDirectory()) {\n        fs.removeSync(dirForDeletion);\n      }\n    }\n  }\n\n  private getSeparatorCount(s: string): number {\n    if (!s) {\n      return 0;\n    }\n\n    const chars = s.split(\"\");\n    let ret = 0;\n    for (const item of chars) {\n      if (item === \"/\" || item === \"\\\\\") {\n        ret++;\n      }\n    }\n    return ret;\n  }\n\n  private compareEntries(a, b) {\n    if (a.indexOf(\"cover.\") > -1) {\n      return -1;\n    }\n    if (b.indexOf(\"cover.\") > -1) {\n      return 1;\n    }\n    const ca = this.getSeparatorCount(a);\n    const cb = this.getSeparatorCount(b);\n    if (ca !== cb) {\n      return ca - cb;\n    }\n    return a < b ? -1 : 1;\n  }\n\n  private getCoverIndex(contentFiles: string[]) {\n    if (!contentFiles || contentFiles.length === 0) return -1;\n\n    const clone = contentFiles.slice(0);\n    clone.sort(this.compareEntries.bind(this));\n    const jpgEntryName = this.getFirstImg(clone);\n    if (jpgEntryName === null) {\n      return -1;\n    }\n\n    return contentFiles.indexOf(jpgEntryName);\n  }\n\n  private getFirstImg(contentFiles: string[]): string {\n    const imgFilePattern = /\\.jpg$|\\.JPG$|\\.jpeg$|\\.JPEG$|\\.png$|\\.PNG$|\\.gif$|\\.GIF$/g;\n    for (let i = 0; i < contentFiles.length; i++) {\n      if (contentFiles[i].match(imgFilePattern)) return contentFiles[i];\n    }\n    return null;\n  }\n\n\n  private findMissingThumbs(category: CategoryIf): string[] {\n    const files = this.appFileUtilService\n      .readDirs(category.baseDir, [...category.bookExtensions, this.thumbSuffix]);\n    const thumbFiles = files.filter(f => f.endsWith(this.thumbSuffix));\n    const contentFiles = files.filter(f => !f.endsWith(this.thumbSuffix));\n\n    return contentFiles.filter(f => {\n      const thumbFileName = this.getThumbFileName(f);\n      return thumbFiles.indexOf(thumbFileName) === -1;\n    });\n  }\n\n  private getThumbFileName(file: string): string {\n    return file.replace(/\\.[^.]+$/g, \".jpg\");\n  }\n}\n","export class IndexAndName {\n\n  constructor(\n    public index: number,\n    public name: string\n  ) {\n  }\n\n}\n","import { Body, Controller, Get, Param, Post } from \"@nestjs/common\";\nimport { ConfigIf, ViewBodyData } from \"@cc/config\";\nimport { AppConfigService } from \"../config/app-config.service\";\nimport { createHash } from \"crypto\";\nimport * as path from \"path\";\nimport { AppUnpackService } from \"../common/unpack/app-unpack.service\";\nimport { AppFileUtilService } from \"../common/file/app-file-util.service\";\nimport * as fs from \"fs-extra\";\n\n\n@Controller(\"view\")\nexport class AppViewerController {\n\n  private static readonly tmpSuffix = \".tmp\";\n  private config: ConfigIf;\n  private readonly unpackingHashes = new Map<string, boolean>();\n\n  constructor(\n    private readonly appUnpackService: AppUnpackService,\n    private readonly appConfigService: AppConfigService,\n    private readonly appFileUtilService: AppFileUtilService\n  ) {\n    this.config = appConfigService.getConfig();\n  }\n\n\n  @Post(\"hash\")\n  getHash(@Body() body: ViewBodyData): string {\n    const category = this.config.categories[body.categoryIndex];\n    const source = path.join(category.baseDir, body.file);\n    return createHash(\"md5\", {})\n      .update(source)\n      .digest(\"base64url\");\n  }\n\n\n  @Post(\"new\")\n  createView(@Body() body: ViewBodyData): string[] {\n    const category = this.config.categories[body.categoryIndex];\n    const source = path.join(category.baseDir, body.file);\n\n    const h = createHash(\"md5\", {})\n      .update(source)\n      .digest(\"base64url\");\n\n    if (this.unpackingHashes.get(h) === true) {\n      return []; // we are unpacking this folder at the moment, so we will send an empty array. Client must recall again.\n    }\n\n    const targetDir = path.join(\n      this.config.tempDir,\n      h\n    );\n\n    let targetExists = fs.existsSync(targetDir);\n    let targetTmpExists = fs.existsSync(targetDir + AppViewerController.tmpSuffix);\n    const unpackNecessary = body.forced || (!targetExists && !targetTmpExists);\n\n    if (unpackNecessary) {\n      this.unpackingHashes.set(h, true);\n      this.doUnpack(source, targetDir);\n      targetExists = fs.existsSync(targetDir);\n      targetTmpExists = fs.existsSync(targetDir + AppViewerController.tmpSuffix);\n    }\n\n    if (targetExists && !targetTmpExists) {\n      this.unpackingHashes.set(h, false);\n      return this.readFiles(targetDir, h);\n    }\n    return [];\n  }\n\n\n  @Get(\"read/:hash\")\n  readView(@Param(\"hash\") hash: string): string[] {\n    const targetDir = path.join(this.config.tempDir, hash);\n    if (!fs.existsSync(targetDir)) {\n      return [];\n    }\n    return this.readFiles(targetDir, hash);\n  }\n\n\n  private readFiles(targetDir: string, h: string) {\n    return this.appFileUtilService\n      .readDirs(targetDir, [\".jpg\", \".jpeg\"])\n      .sort()\n      .map(f => path.join(h, f));\n  }\n\n  private async doUnpack(source: string, targetDir: string) {\n    const tmpTarget = targetDir + AppViewerController.tmpSuffix;\n    await this.appUnpackService\n      .unpackSync(source, {\n        targetDir: tmpTarget,\n        forceDirectory: false\n      });\n    fs.renameSync(tmpTarget, targetDir);\n  }\n}\n","import {Module} from \"@nestjs/common\";\nimport {ConfigModule} from \"@nestjs/config\";\nimport configuration from \"../../config/configuration\";\nimport {AppConfigModule} from \"../config/app-config.module\";\nimport {AppViewerController} from \"./app-viewer-controller\";\nimport {AppUnpackModule} from \"../common/unpack/app-unpack.module\";\nimport {AppFileUtilModule} from \"../common/file/app-file-util.module\";\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      load: [configuration]\n    }),\n    AppConfigModule,\n    AppUnpackModule,\n    AppFileUtilModule\n  ],\n  controllers: [\n    AppViewerController\n  ],\n  providers: [],\n  exports: []\n})\nexport class AppViewerModule {\n}\n","import * as path from \"path\";\n\n\nexport default () => ({\n  port: parseInt(process.env.PORT, 10) || 3000,\n  configUrl: path.join(__dirname, 'assets/config.json')\n  /*\n  categories: [\n    {\n      apiUrl: '/api/comics/',\n      baseDir: '/Users/marckronberg/Comics.nosync',\n      bookExtensions: [\n        '.cbz',\n        '.cbr'\n      ],\n      title: 'Comics',\n      icon: 'accessibility_new',\n      thumbsDims: [\n        {\n          width: 83,\n          height: 150\n        },\n        {\n          width: 196,\n          height: 300\n        },\n        {\n          width: 329,\n          height: 450\n        },\n        {\n          width: 392,\n          height: 600\n        }\n      ],\n      'dimIndex': 1,\n      'initialFilter': ''\n    },\n    {\n      apiUrl: '/api/ebooks/',\n      baseDir: '/Users/marckronberg/Ebooks.nosync',\n      bookExtensions: [\n        '.epub'\n      ],\n      title: 'Ebooks',\n      icon: 'star',\n      thumbsDims: [\n        {\n          width: 83,\n          height: 150\n        },\n        {\n          width: 392,\n          height: 600\n        }\n      ],\n      'dimIndex': 1,\n      'initialFilter': ''\n    }\n  ]\n  */\n});\n","export * from './lib/data/config.if';\nexport * from './lib/data/config';\nexport * from './lib/data/category.if';\nexport * from './lib/data/category';\nexport * from './lib/data/thumbs-dim.if';\nexport * from './lib/data/thumbs-dim';\nexport * from './lib/data/view-body.data';\n","import {ThumbsDimIf} from \"./thumbs-dim.if\";\n\nexport interface CategoryIf {\n  apiUrl: string;\n  baseDir: string;\n  bookExtensions: string[];\n  title: string;\n  icon: string;\n  thumbsDims: ThumbsDimIf[];\n  dimIndex: number;\n  initialFilter: string;\n}\n","import { CategoryIf, ThumbsDim, ThumbsDimIf } from \"@cc/config\";\n\nexport class Category implements CategoryIf {\n  constructor(\n    public apiUrl: string,\n    public baseDir: string,\n    public bookExtensions: string[] = [\".cbr\"],\n    public title: string = \"\",\n    public icon: string = \"\",\n    public thumbsDims: ThumbsDimIf[] = [new ThumbsDim(200, 300)],\n    public dimIndex: number = 0,\n    public initialFilter: string = \"\"\n  ) {\n  }\n\n}\n","import {CategoryIf} from \"./category.if\";\n\nexport interface ConfigIf {\n  port: number;\n  tempDir: string;\n  categories: CategoryIf[];\n}\n\n\n","import {CategoryIf} from \"./category.if\";\nimport {ConfigIf} from \"./config.if\";\n\nexport class Config implements ConfigIf {\n  constructor(\n    public port: number = 3333,\n    public tempDir: string = './tmp',\n    public categories: CategoryIf[] = []\n  ) {\n  }\n\n}\n\n\n","export interface ThumbsDimIf {\n  width: number;\n  height: number;\n}\n","export class ThumbsDim {\n  constructor(\n    public width: number,\n    public height: number\n  ) {\n  }\n}\n","export class ViewBodyData {\n\n  constructor(\n    public categoryIndex: number,\n    public file: string,\n    public forced = true\n  ) {\n  }\n\n}\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/config\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/serve-static\");","module.exports = require(\"fs-extra\");","module.exports = require(\"tslib\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"os\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import {Logger} from \"@nestjs/common\";\nimport {NestFactory} from \"@nestjs/core\";\n\nimport {AppModule} from \"./app/app.module\";\nimport {AppService} from \"./app/app.service\";\nimport * as path from \"path\";\nimport * as fs from \"fs\";\nimport {ConfigIf} from \"@cc/config\";\n\n\nasync function bootstrap() {\n  const json = fs.readFileSync(path.resolve(__dirname + \"/assets/config.json\"));\n  const config: ConfigIf = JSON.parse(json.toString(\"utf8\"));\n\n  const app = await NestFactory.create(AppModule);\n  Logger.log(app);\n  const globalPrefix = \"api\";\n  app.setGlobalPrefix(globalPrefix);\n  app.enableCors();\n  // app.useGlobalFilters(new HttpExceptionFilter());\n  // app.useGlobalInterceptors(new ErrorInterceptor());\n  // app.useGlobalPipes(new ValidationPipe())\n  const port = process.env.PORT || config.port;\n\n\n  // Handle 404\n  // app.use(function (req, res) {\n  //   console.info('404', req.originalUrl);\n  //   res.sendFile(path.resolve(__dirname + '/assets/empty.gif'));\n  // });\n  bootstrapStaticAssets(app, config);\n\n  const server = app.getHttpServer();\n  const router = server._events.request._router;\n  const availableRoutes: [] = router.stack\n    .map(layer => {\n      if (layer.route) {\n        return {\n          path: layer.route.path,\n          method: layer.route.stack[0].method\n        };\n      }\n    })\n    .filter(item => item !== undefined);\n  AppService.availableRoutes = availableRoutes;\n  Logger.log(\"Routes:\\n\\t\" +\n    availableRoutes\n      .map(r => r[\"method\"] + \": \" + r[\"path\"])\n      .join(\"\\n\\t\"));\n\n  await app.listen(port, () => {\n    Logger.log(\"Listening at http://localhost:\" + port + \"/\" + globalPrefix);\n  });\n}\n\nfunction bootstrapStaticAssets(app, config: ConfigIf) {\n  Logger.log('Static dirs:');\n  config.categories\n    .forEach(cat => {\n      app.useStaticAssets(cat.baseDir);\n      Logger.log(`    added: ${cat.baseDir}`);\n    });\n  app.useStaticAssets(config.tempDir);\n  Logger.log(`    added: ${config.tempDir}`);\n\n  // if (fs.existsSync(path.resolve(__dirname, \"../comiccommander/index.html\"))) {\n  //   const ff = path.resolve(__dirname, \"../comiccommander\")\n  //   app.useStaticAssets(ff);\n  //   Logger.log(`    added: ${ff}`);\n  // }\n}\n\nbootstrap();\n"],"names":[],"sourceRoot":""}